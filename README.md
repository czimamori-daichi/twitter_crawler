# Serverless Scalable Twitter Crawler

## クロール対象

フォローグラフ

## 目標

- AWS環境にサーバレスな Twitter クローラを構築
- クロール規模がスケール可能
- サーバ運用よりも低コスト

## AWS環境にサーバレスな Twitter クローラを構築

以下の AWS のサービスを利用

- Lambda
  - クロール実行
- SQS
  - クロール対象のキューイング
- ElastiCache
  - クロール対象の重複判定
- S3
  - クロールデータの保存
- Athena
  - S3 に保存したクロールデータを整形して抽出


## クロール規模がスケール可能

- 目標は、日本人ユーザ（約3000万アカウント）を一週間程度でクロール
- そのためには、秒間 50 クロールが必要
- Lambda は同時起動が最大 100 なので（申請により緩和可能）、一回の Lamdba の処理が 2 秒以内に終了する必要あり
  - 緩和申請することで、実行時間は多少伸ばすことは可能

## サーバ運用よりも低コスト

ElastiCache 以外は従量課金制なので、クロール規模に対して課金が変わる。

## データ形式

### to_crawl_followers

```
{"user_id": 7080152, "cursor": 1555516028321571380}
```
